---
import Hero from '../../components/Hero.astro';
import ScrollProgress from '../../components/ScrollProgress.astro';
import Layout from '../../layouts/Layout.astro';
import heroImage from '../../assets/images/Projects-Hero.png';
import heroImageSM from '../../assets/images/Projects-Hero-SM.png';
import ProjectCard from '../../components/ProjectCard.astro';
import ContactUsSection from '../../components/ContactUsSection.astro';
import { getCollection } from 'astro:content';
import ProjectFilterButton from '../../components/ProjectFilterButton.astro';

const projects = await getCollection('projects');
---

<Layout
    title='Projects - Archytech'
    description='Successful Projects Completed and In Progress for Archytech'
    robots={false}
>
    <Hero heroBackgroundImgSrcList={[heroImageSM, heroImage]} alt='Projects Hero Image'>
        <div class='bottom-10 z-20 absolute flex w-full flex-col space-y-8 md:space-y-10'>
            <h2 class='hero-h1 bottom-0 tracking-wide px-6 lg:px-20'>Projects</h2>
            <div class='px-6 lg:px-20'>
                <ScrollProgress
                    isHeroScrollProgress={true}
                    barColor='bg-brand-black'
                    progressColor='bg-brand-gray'
                    barHeight='h-48 lg:h-56'
                    progress='bottom-[75%]'
                />
            </div>
        </div>
        <div
            class='bg-brand-black bg-blend-luminosity md:backdrop-blur-xl bg-opacity-50 z-10 absolute top-0 left-0 w-full md:w-[43%] h-full'
        >
        </div>
    </Hero>
    <main class='flex flex-col items-center w-full py-8 lg:py-16 lg:px-16 px-6'>
        <div>
            <section class='flex flex-col space-y-4 mb-8 w-full lg:flex-row lg:space-y-0 lg:space-x-8'>
                <ProjectFilterButton id="show-all" buttonText='SHOW ALL'/>
                <ProjectFilterButton id="residential" buttonText='RESIDENTIAL'/>
                <ProjectFilterButton id="commercial" buttonText='COMMERCIAL'/>
                <ProjectFilterButton id="in-progress" buttonText='IN PROGRESS'/>
            </section>
            <section class='grid grid-cols-1 gap-y-6 justify-items-center md:grid-cols-2 lg:grid-cols-3 md:gap-x-16 lg:gap-y-10' data-projects={projects}>
                {projects.map((project: any) => {
                    return <ProjectCard projectName={project.data.projectName} projectSlug={project.data.slug} projectCategory={project.data.category}
                    projectImageMobileSrc={project.data.cardImageMobile} projectImageDesktopSrc={project.data.cardImageDesktop} projectImageAlt={project.data.cardImageAlt}/>
                })}
            </section>
        </div>
        
        </div>
        
    </main>
    <ContactUsSection />
    <script src='../../scripts/projects.ts'></script>
</Layout>
