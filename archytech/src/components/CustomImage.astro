---
import type { ImageMetadata } from 'astro';
import { getImage } from 'astro:assets';

interface Props {
    mobileImgUrl: ImageMetadata;
    desktopImgUrl: ImageMetadata;
    imageSizes: number[][];
    alt: string;
    classList: string;
}

const { mobileImgUrl, desktopImgUrl, imageSizes, alt, classList } = Astro.props;

const mobileImg = await getImage({
    src: mobileImgUrl,
    format: 'webp',
    width: imageSizes[0][0] ?? 0,
    height: imageSizes[0][1] ?? 0,
});

const desktopImg = await getImage({
    src: desktopImgUrl,
    format: 'webp',
    width: imageSizes[1][0] ?? 0,
    height: imageSizes[1][1] ?? 0,
});
---

<picture class={classList}>
    <source media='(max-width: 799px)' srcset={mobileImg.src} />
    <source media='(min-width: 800px)' srcset={desktopImg.src} />
    <img src={desktopImg.src} alt={alt} />
</picture>
